{"ast":null,"code":"var _jsxFileName = \"C:\\\\EMSI\\\\node__react\\\\project nodeJS-reactJs-mySql\\\\Client\\\\my-react\\\\src\\\\pages\\\\createpost.js\",\n    _s = $RefreshSig$();\n\nimport react from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport axios from 'axios';\nimport './css/App.css';\nimport './css/comment.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Post() {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [dataa, setdata] = useState({});\n  const [Comments, setComments] = useState([]);\n  const [newComment, setnewComment] = useState('');\n  useEffect(() => {\n    axios.get(`http://localhost:3001/posts/${id}`).then(result => {\n      setdata(result.data);\n    });\n    axios.get(`http://localhost:3001/Comments/${id}`).then(result => {\n      setComments(result.data);\n    });\n  }, []);\n\n  const addComment = () => {\n    axios.post(`http://localhost:3001/Comments`, {\n      comment: newComment,\n      TableId: id\n    }, {\n      headers: {\n        accessToken: sessionStorage.getItem('accessTToken')\n      }\n    }).then(result => {\n      if (!result.data.error) {\n        const newcomment = {\n          comment: result.data.Comment.comment,\n          userName: result.data.Comment.userName\n        };\n        setComments([...Comments, newcomment]);\n        window.location.reload(false);\n      } else {\n        alert('user not logged in....');\n      }\n    });\n  };\n\n  const handleClick = event => {\n    event.preventDefault();\n\n    if (message.trim().length !== 0) {\n      alert('input value is NOT empty');\n    } else {\n      alert('input value is empty');\n    }\n  };\n\n  const supp = (userName, id) => {\n    axios.post('http://localhost:3001/Comments/delete', {\n      userName: userName,\n      id: id\n    }, {\n      headers: {\n        accessToken: sessionStorage.getItem('accessTToken')\n      }\n    }).then(result => {\n      if (result.data.error) {\n        alert(result.data.error);\n      } else {\n        alert(result.data);\n        window.location.reload(false);\n      }\n    });\n  };\n\n  const Update = (userName, id) => {\n    axios.post('http://localhost:3001/Comments/update', {\n      userName: userName,\n      id: id,\n      comment: newComment\n    }, {\n      headers: {\n        accessToken: sessionStorage.getItem('accessTToken')\n      }\n    }).then(result => {\n      if (!result.data.error) {\n        alert('comment Updated');\n        window.location.reload(false);\n      } else {\n        alert(result.data.error);\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title\",\n        children: dataa.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"body\",\n        children: dataa.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"username\",\n        children: dataa.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"addComment\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"inpout\",\n          onClick: handleClick,\n          onChange: event => {\n            setnewComment(event.target.value);\n          },\n          autoComplete: \"off\",\n          type: \"text\",\n          placeholder: 'Your comment'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 39\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"button-52\",\n          onClick: addComment,\n          children: \"Ajouter\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 39\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Comments\",\n        children: Comments.map((event, key) => {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"Comments\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"username\",\n                children: event.userName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 40\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"Comment\",\n                children: [\" \", event.comment]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 42\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 41\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button-52\",\n              onClick: () => supp(event.userName, event.id),\n              children: \"Delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 42\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"button-52\",\n              onClick: () => Update(event.userName, event.id, newComment),\n              children: \"Update\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 42\n            }, this)]\n          }, key, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 37\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Post, \"QdXbAJChUuohcIYx77vBL9iWbpE=\", false, function () {\n  return [useParams];\n});\n\n_c = Post;\nexport default Post;\n\nvar _c;\n\n$RefreshReg$(_c, \"Post\");","map":{"version":3,"names":["react","useParams","useEffect","useState","axios","Post","id","dataa","setdata","Comments","setComments","newComment","setnewComment","get","then","result","data","addComment","post","comment","TableId","headers","accessToken","sessionStorage","getItem","error","newcomment","Comment","userName","window","location","reload","alert","handleClick","event","preventDefault","message","trim","length","supp","Update","title","description","username","target","value","map","key"],"sources":["C:/EMSI/node__react/project nodeJS-reactJs-mySql/Client/my-react/src/pages/createpost.js"],"sourcesContent":["import react from 'react';\r\nimport {useParams} from 'react-router-dom'\r\nimport {useEffect} from 'react'\r\nimport {useState} from 'react'\r\nimport axios from 'axios'\r\nimport './css/App.css'\r\nimport './css/comment.css'\r\n\r\n\r\n\r\n\r\nfunction Post(){\r\n  const {id}=useParams();\r\n  const [dataa,setdata]=useState({});\r\n  const [Comments,setComments]=useState([])\r\n  const [newComment,setnewComment]=useState('');\r\n\r\n\r\n\r\nuseEffect(()=>{\r\n  axios.get(`http://localhost:3001/posts/${id}`).then((result)=>{\r\n\r\n    setdata(result.data)\r\n  })\r\n\r\n  axios.get(`http://localhost:3001/Comments/${id}`).then((result)=>{\r\n\r\n    setComments(result.data)\r\n\r\n  })\r\n\r\n\r\n},[])  \r\n\r\nconst addComment=()=>{\r\n    axios.post(`http://localhost:3001/Comments`,{comment:newComment,TableId:id},{headers:{accessToken:sessionStorage.getItem('accessTToken')}}).then((result)=>{\r\n      if(!result.data.error){\r\n        const newcomment={comment:result.data.Comment.comment,userName:result.data.Comment.userName}\r\n            setComments([...Comments,newcomment])\r\n            window.location.reload(false);\r\n           \r\n      }\r\n      else{\r\n             alert('user not logged in....')\r\n      }\r\n  })\r\n\r\n  }\r\n  const handleClick =(event) => {\r\n    event.preventDefault();\r\n\r\n    if (message.trim().length !== 0) {\r\n     alert ('input value is NOT empty');\r\n    } else {\r\n      alert ('input value is empty');\r\n    }\r\n  };\r\n  const supp=(userName,id)=>{\r\n    axios.post('http://localhost:3001/Comments/delete',{userName:userName,id:id},{headers:{accessToken:sessionStorage.getItem('accessTToken')}}).then((result)=>{\r\n      if(result.data.error){\r\n        alert(result.data.error)\r\n      }else{\r\n        alert(result.data)\r\n        window.location.reload(false);\r\n      }\r\n    })\r\n  }\r\n  const Update=(userName,id)=>{\r\n        axios.post('http://localhost:3001/Comments/update',{userName:userName,id:id,comment:newComment},{headers:{accessToken:sessionStorage.getItem('accessTToken')}}).then((result)=>{\r\n\r\n              if(!result.data.error)                                                             {\r\n                alert('comment Updated');\r\n                window.location.reload(false);\r\n              }   \r\n              else{\r\n                alert(result.data.error);\r\n              }\r\n        })\r\n  }\r\n\r\n    return(\r\n    <div className='App'>\r\n      <div className='post'>\r\n          <div className='title'>{dataa.title}</div>\r\n          <div className='body'>{dataa.description}</div>\r\n          <div className='username'>{dataa.username}</div>\r\n      </div>\r\n      <div className='container'>\r\n          <div className='addComment'><input className='inpout' onClick={handleClick} onChange={(event)=>{setnewComment(event.target.value)}} autoComplete='off' type='text' placeholder={'Your comment'}/>\r\n                                      <button className='button-52'  onClick={addComment}>Ajouter</button>\r\n          </div>  \r\n\r\n          \r\n          <div className='Comments'>\r\n                    {Comments.map((event,key)=>{\r\n                            return  <div  key={key} className='Comments'>\r\n                                        <div className='comment'>  \r\n                                       <div className='username'>{event.userName}</div>\r\n                                        \r\n                                         <div className='Comment' > {event.comment}</div>\r\n                                         </div>\r\n                                         <button className='button-52' onClick={()=>supp(event.userName,event.id)}>Delete</button>\r\n                                         <button className='button-52' onClick={()=>Update(event.userName,event.id,newComment)}>Update</button>\r\n                                    </div>\r\n                        \r\n                        })\r\n                    }   \r\n          </div>\r\n      </div>\r\n    </div>\r\n\r\n)\r\n\r\n}\r\n\r\n\r\nexport default Post;"],"mappings":"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"},"metadata":{},"sourceType":"module"}